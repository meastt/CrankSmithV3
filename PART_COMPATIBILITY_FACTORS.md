# CrankSmith Part Compatibility Factors

**Generated:** 11/29/2025

---

## Summary

Here is the updated and expanded list with the critical compatibility specifications (specs) needed for each component to cross-reference others.

## Frame
Wheel/Tire Size Compatibility: Max tire width clearance (e.g., 700c x 45mm, 29" x 2.4").

Rear Axle Standard: Thru-axle dimensions (e.g., 12x142, 12x148 Boost, 12x157 Super Boost).

Bottom Bracket (BB) Shell Standard: The physical interface on the frame (e.g., BSA Threaded, T47, PF30, BB86).

Headset Standard (S.H.I.S.): Upper and lower cup types/diameters (e.g., IS42/IS52, ZS44/ZS56) — Critical for fork fit.

Brake Mount Type: Rear caliper interface (e.g., Flat Mount, Post Mount 160mm).

Seatpost Diameter: (e.g., 27.2mm, 30.9mm, 31.6mm, or Proprietary/Aero).

Front Derailleur (FD) Mount: (e.g., Braze-on, Band-clamp, or "1x Specific/No Mount").

Rear Derailleur Hanger: (e.g., Standard proprietary, or UDH universal).

Cable Routing: Internal vs. External, and specifically Headset Routing compatibility (does it require a specific stem for fully hidden cables?).

Max Chainring Size: Physical clearance limits (e.g., Max 34T for 1x, or 50/34T for 2x).

## Fork
Steerer Tube Specs: Diameter and taper (e.g., 1 1/8" to 1 1/2" Tapered, 1 1/4" Overdrive).

Axle Standard: Front thru-axle dimensions (e.g., 12x100mm Road, 15x110mm Boost MTB).

Brake Mount Type: (e.g., Flat Mount, Post Mount 160, Post Mount 180).

Max Tire Clearance: Must match or exceed the frame's intended use/tire choice.

Axle-to-Crown Length: Affects geometry; mostly relevant if swapping forks on MTB.

Offset/Rake: (e.g., 44mm, 51mm) — Affects handling trail.

## Wheelset
Diameter: (700c, 650b/27.5", 29").

Axle/End Cap Standards: Must match Frame (Rear) and Fork (Front) exactly.

Brake Rotor Interface: (Centerlock vs. 6-Bolt).

Freehub Body Type: The interface for the cassette (e.g., Shimano HG, SRAM XDR, Shimano MicroSpline, Campagnolo N3W).

Internal Rim Width: Determines optimal tire width range (e.g., 21mm internal is good for 28-35mm tires).

## Tires
Diameter: Must match Wheelset (e.g., 700c/29").

Width: Must fit within Frame/Fork Max Clearance AND be compatible with Wheelset Rim Width.

Type: (Clincher/Tube-only, Tubeless Ready, Tubular).

Hookless Compatibility: Critical safety check—if wheels are hookless, tires must be hookless approved.

## BB (Bottom Bracket)
Frame Interface: Must match Frame BB Shell (e.g., BSA, T47, BB86).

Crank Spindle Interface: Must match Crankset Spindle diameter/type (e.g., Shimano 24mm, SRAM DUB 28.99mm, 30mm).

Shell Width: (e.g., 68mm Road, 73mm MTB, 86.5mm Road Pressfit).

## Crankset
Spindle Type: (24mm, DUB, 30mm) — Must match BB.

Chainline: (e.g., Standard, Boost, Wide) — Must match Frame rear spacing to ensure proper shifting.

Speeds: (11sp, 12sp, 13sp) — Tooth profile must match Chain/Groupset.

Configuration: (1x or 2x) — Must match Frame FD mount capability and Shifter type.

Arm Length: (e.g., 165mm, 170mm, 172.5mm) — Fit preference.

## Cassette
Speeds: (e.g., 11, 12, 13) — Must match Shifter/Derailleur.

Freehub Interface: (e.g., HG, XDR, MicroSpline) — Must match Wheelset.

Range (Tooth Count): (e.g., 10-33T, 10-52T) — Max cog size must be within Rear Derailleur capacity.

## Front Derailleur (If applicable)
Mount Type: (Braze-on vs. Clamp-on diameter).

Actuation: (Mechanical Cable vs. Electronic Wire vs. Wireless).

Speed Compatibility: (11sp vs 12sp chainring width).

Chainring Capacity: Max tooth difference (e.g., 16T capacity for 50/34 rings).

## Rear Derailleur
Speeds: (11sp, 12sp, 13sp).

Max Cog Capacity: The largest cassette cog it can handle (e.g., Max 36T [Road] vs Max 52T [Mullet/MTB]). Shifter Compatibility:

Electronic: Brand/Protocol (e.g., SRAM AXS vs Shimano Di2).

Mechanical: Pull Ratio (e.g., Shimano Road vs Shimano GRX vs SRAM Eagle—they are rarely cross-compatible).

Mount Type: Standard Hanger vs. Direct Mount vs. Full Mount (SRAM Transmission).

## Shifters (Levers)
Brake Type: (Hydraulic vs. Mechanical Cable) — Must match Brake Calipers.

Shifting Protocol: (Electronic vs. Mechanical).

Speeds: (11, 12) — Must match Derailleurs.

Drivetrain Compatibility: (e.g., SRAM AXS shifters work with both Road and MTB AXS derailleurs, but Shimano Road Di2 does not work with Shimano MTB Di2 derailleurs natively).

## Brake Caliper Set
Mount Type: (Flat Mount [Road/Gravel] vs. Post Mount [MTB]).

Fluid Type: (Mineral Oil [Shimano] vs. DOT Fluid [SRAM]) — Must match Shifters/Levers.

Hose Connection: (Banjo vs. Straight) — Usually comes with the set, but vital for custom builds.

## Brake Rotor Set
Mount Interface: (Centerlock vs. 6-Bolt) — Must match Wheels.

Diameter: (140mm, 160mm, 180mm, 203mm) — Must be within Frame/Fork min/max ratings and may require adapters.

Pad Width Compatibility: (Wide type vs Narrow type) — Rare issue, but relevant for some niche brands.

## Stem
Steerer Clamp Diameter: (1 1/8", 1 1/4") — Must match Fork Steerer.

Handlebar Clamp Diameter: (31.8mm, 35mm) — Must match Handlebar.

Cable Integration: Does it support internal cable routing? (Required for some modern "clean cockpit" frames).

## Handlebar
Clamp Diameter: (31.8mm, 35mm) — Must match Stem.

Width: (Fit preference).

Routing Holes: Di2/Internal routing ports? (Needed for wiring electronic shifters internally).

## Seatpost
Diameter/Shape: (Round 27.2/30.9/31.6 or D-Shape/Aero proprietary) — Must match Frame.

Battery Compliance: Does it hold a Di2 internal battery? (If running Shimano Di2).

Rail Clamp: (7x7 Round vs 7x9 Carbon Oval) — Must match Saddle rails.

## Chain

Speeds: Must match Cassette/Derailleur speed (11sp chain on 12sp cassette = jam).

Type: (Flat-top [SRAM Road AXS] vs Standard Roller). SRAM Road AXS requires a specific Flat-top chain.

## Saddle

Rail Material/Shape: (Round Metal 7x7mm vs Oval Carbon 7x9mm). Must match Seatpost clamp type.

## Future Clarifications after basic logic is solid

ok, in the logic of the builder, we need some conditional logic for a couple parts. For example:

1. Forks: For road and gravel we can just make the assumption the user is going with the factory frameset fork. For MTB it should be a part that is selected as suspension is so subjective to each persons build and often changed/upgraded

2. Front Derailluer: Some users want a 1x not a 2x and some gravel frames dont even have 2x compatibility.

## Flow Logic Dependency Tree:

In a bike build, the Frame is usually the "Root" object. almost every other part must validate against the frame directly, or against a part that is attached to the frame.

Here is a visual Logic Roadmap for your code structure.

The "Bike Builder" Logic Flowchart
This flowchart represents the order in which your app should validate parts. If the user changes a "Parent" item (like the Frame), all "Child" items must re-validate.

## Code snippet example

graph TD
    %% NODES
    Start([User Starts Build]) --> SelectFrame[Select FRAME]
    
    SelectFrame --> CheckFork{Select FORK}
    SelectFrame --> CheckBB{Select BOTTOM BRACKET}
    SelectFrame --> CheckWheelR{Select REAR WHEEL}
    SelectFrame --> CheckSeatpost{Select SEATPOST}
    
    %% FORK BRANCH
    CheckFork -- Check: Headset Std, Wheel Size, Axle --> ValidFork[Fork Validated]
    ValidFork --> CheckWheelF{Select FRONT WHEEL}
    CheckWheelF -- Check: Axle Std, Brake Mount --> ValidWheelF[Front Wheel Validated]
    ValidFork --> CheckStem{Select STEM}
    CheckStem -- Check: Steerer Tube Dia --> ValidStem[Stem Validated]
    ValidStem --> CheckBar{Select HANDLEBAR}
    CheckBar -- Check: Clamp Dia --> ValidBar[Bar Validated]

    %% DRIVETRAIN BRANCH
    CheckBB -- Check: Shell Std, Width --> ValidBB[BB Validated]
    ValidBB --> CheckCrank{Select CRANKSET}
    CheckCrank -- Check: Spindle Dia, Chainline --> ValidCrank[Crank Validated]
    
    %% WHEEL REAR BRANCH
    CheckWheelR -- Check: Hub Spacing, Axle Std --> ValidWheelR[Rear Wheel Validated]
    ValidWheelR --> CheckCassette{Select CASSETTE}
    CheckCassette -- Check: Freehub Body, Speeds --> ValidCassette[Cassette Validated]
    
    %% DERAILLEUR & SHIFTING (THE COMPLEX PART)
    ValidCassette --> CheckRD{Select REAR DER}
    CheckRD -- Check: Max Cog, Capacity --> ValidRD[Rear Derailleur Validated]
    ValidRD --> CheckShifter{Select SHIFTERS}
    CheckShifter -- Check: Pull Ratio/Protocol --> ValidShifter[Shifters Validated]
    
    %% BRAKES CROSS CHECK
    ValidShifter -.-> CheckBrakes{Select BRAKES}
    SelectFrame -.-> CheckBrakes
    ValidFork -.-> CheckBrakes
    CheckBrakes -- Check: Mount Type, Fluid Type --> ValidBrakes[Brakes Validated]

    %% TIRE CHECK
    ValidWheelF & ValidWheelR --> CheckTires{Select TIRES}
    CheckTires -- Check: Diameter, Rim Width, Frame Clearance --> ValidTires[Tires Validated]

    %% STYLE
    classDef main fill:#f9f,stroke:#333,stroke-width:2px;
    classDef validation fill:#bbf,stroke:#333,stroke-width:1px;
    class SelectFrame,Start main;
    class CheckFork,CheckBB,CheckWheelR,CheckSeatpost,CheckWheelF,CheckStem,CheckBar,CheckCrank,CheckCassette,CheckRD,CheckShifter,CheckBrakes,CheckTires validation;

## How to Code This (The Roadmap)

To build this, do not try to write one giant if/else statement. Instead, structure your database and logic into Interface Zones.

### Zone 1: The Rolling Chassis (Physical Fitment)

Logic: The Frame dictates the physical dimensions for the Fork and Wheels.

The Code Check:

Fork.SteererDiameter == Frame.HeadsetTop (Requires headset mapping)

FrontWheel.Axle == Fork.Axle

RearWheel.Axle == Frame.RearAxle

### Zone 2: The Engine Room (Bottom Bracket & Cranks)

Logic: This is the most common place for errors. The Frame determines the Shell (the hole), the Crank determines the Spindle (the stick), and the Bottom Bracket is the Adapter between them.

The Code Check:

User selects Frame (e.g., "BSA Threaded").

Filter BBs: Show only BB.Type == 'BSA'.

User selects Crank (e.g., "SRAM Dub").

Filter BBs again (or validate): Does SelectedBB support Crank.SpindleDiameter (28.99mm)?

### Zone 3: The Drivetrain Ecosystem (Protocol & Capacity)

Logic: Here, physical fitment matters less than "Protocol."

The Code Check:

Protocol Tag: Tag every shifter and derailleur with a protocol ID (e.g., Protocol: "Shimano_Road_11sp_Mech", Protocol: "SRAM_AXS").

Validation: Shifter.Protocol must match RearDerailleur.Protocol.

Capacity: RearDerailleur.MaxCog >= Cassette.LargestCog.

## Database Schema Tip
To make this work, your database tables need a "Compatibility Keys" column (JSON format is great for this).

Example Component Entry (Rear Derailleur):

JSON

{
  "name": "SRAM Force AXS D2",
  "type": "RearDerailleur",
  "specs": {
    "speeds": 12,
    "max_cog": 36,
    "min_cog": 10
  },
  "compatibility_tags": {
    "protocol": ["SRAM_AXS"],
    "mount": ["Standard"],
    "chain_type": ["Flattop"]
  }
}
Example Component Entry (Shifter):

JSON

{
  "name": "SRAM Force AXS Shifter",
  "type": "Shifter",
  "compatibility_tags": {
    "protocol": ["SRAM_AXS"],
    "brake_fluid": ["DOT"]
  }
}
The Logic: Your app simply checks if the arrays in compatibility_tags.protocol overlap. If they share a tag, they fit.